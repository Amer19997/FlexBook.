@page
@model WebUI.Pages.OfflineDonation.IndexModel
@Html.AntiForgeryToken()
@if (!string.IsNullOrEmpty(Model.Error))
{
    <span style="color:red"> . @Model.Error</span>

    <br />
}


@if (Model.OfflineDonationRequests.OfflineDonationRequests.Any())
{
    <div class="app-heading">
        <div class="app-title">

            <h3 class="mb-2">طلبات تبرعات الأوف لاين</h3>
        </div>

        <div class="app-filter mx-2">
            <div class="filter-form">
                <form method="post"
                      data-ajax="true"
                      data-ajax-url="?handler=Search"
                      data-ajax-method="post"
                      id="search-OfflineDonation-form"
                      data-ajax-mode="replace"
                      data-ajax-update="#search-result">
                    <div class="myform">
                        <label for="">التصفية بواسطة :</label>

                        <select asp-for="@Model.Filters.Providers" class="form-select filteration" asp-items="@(new SelectList(Model.LookupProv.Providers,"Id","NameAr"))">
                            <option value="0" selected>الجهة </option>
                        </select>

                        <select asp-for="@Model.Filters.Products" class="form-select filteration" asp-items="@(new SelectList(Model.LookupProd.Products,"Id","DisplayName"))">
                            <option value="0" selected>اسم المنتج</option>
                        </select>

                        <select asp-for="@Model.Filters.Status" class="form-select filteration" asp-items="@(new SelectList(Model.LookupStatus.Status,"Id","Name"))">
                            <option value="" selected>حالة الطلب</option>
                        </select>

                        <button type="submit" class="btn btn-secondary">تصفية</button>
                        <a class="close-filter btnclose d-none" id="btnclose" onclick="Closebtn()" asp-page="/OfflineDonation/Index" asp-page-handler="GetAjax" type="reset">
                            <img src="~/cms_lib/img/icons/close-filter.svg" />
                        </a>
                    </div>


                </form>
            </div>
        </div>

    </div>
    @if (!string.IsNullOrEmpty(Model.Error))
    {
        <span style="color:red"> . @Model.Error</span>

        <br />
    }


    <div id="search-result">
        <partial name="_OfflineDonnerList.cshtml" model="@Model.OfflineDonationRequests" />
    </div>

}
else
{

    <div class="parent w-100 h-100">
        <div class="child">
            <div>
                <img src="~/Cms_Lib/img/icons/no-users-icon.svg" alt="search-icon" />

            </div>

            <div>
                <h2>لا يوجد طلبات جديده</h2>
            </div>
        </div>

    </div>
}

@*<div class="modal fade body-modal" id="Offline-Action-Modal" data-bs-backdrop="static" data-bs-keyboard="false"
     tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-md modal-dialog-centered">

        <div class="modal-content text-center">
            <div class="modal-body">
                <span class="ps-1"><img src="/cms_lib/img/icons/actionofflinedonation.svg" alt="details-icon" class="icons" /></span>
                <h3>يرجي أختيار الاجراء المناسب للطلب وفقا لروئيتكم</h3>

            </div>
            <div class="modal-button">
                <a id="ApproveRequestDonation" data-id="" class=" btn btn-tertiary">قبول</a>
                <button id="RejRequestDonation" data-id="" class=" btn btn-light-primary" data-bs-dismiss="modal">رفض</button>
            </div>


        </div>
    </div>
</div>*@

<div class="modal fade" id="Offline-Action-Modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">

            <div class="modal-body text-center">
                <span class="ps-1"><img src="/cms_lib/img/icons/actionofflinedonation.svg" alt="details-icon" class="icons" /></span>
                <h3>يرجي أختيار الاجراء المناسب للطلب وفقا لروئيتكم</h3>
                <div class="modal-button">
                    <a id="ApproveRequestDonation" data-id="" class=" btn btn-tertiary">قبول</a>
                    <button id="RejRequestDonation" data-id="" class=" btn btn-light-primary" data-bs-dismiss="modal">رفض</button>
                </div>

            </div>

        </div>
    </div>
</div>

<div class="modal fade body-modal" id="reject-Modal" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content text-center p-0">
            <div class="modal-body text-end">


                <h3>ابداء سبب الرفض</h3>
                <p><small>يرجى العمل بأنه لن يتم الرفض إلا بعد إبدائها سبب للتبرع.</small></p>
                <div class="">
                    <textarea maxlength="2500" id="RejectionReason" class="form-control w-100" rows="7" placeholder="اكتب سبب الرفض"></textarea>
                    <span id="errorReject" class="text-danger d-none">يجب ادخال سبب الرفض بشكل صحيح</span>
                    <p><small>عدد الاحرف المسموح بها 2500 حرف.</small></p>
                </div>

                <div class="modal-button">
                    <button id="deactive-id" data-id="" class=" btn btn-tertiary">
                        <img src="~/Cms_Lib/img/icons/Send.svg" alt="details-icon" class="icons ms-1 mt-1" />ارسال
                    </button>
                    <button type="button" id="returnRequestAction" class=" btn btn-light-primary" data-bs-dismiss="modal">عودة</button>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade body-modal" id="ApprovedR" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-md modal-dialog-centered">
        <div class="modal-content text-center">
            <div class="modal-body text-center">
                <span class="ps-1"><img src="~/cms_lib/img/icons/add-user-popup.svg" alt="details-icon" class="icons" /></span>
                <h3>تمت قبول الطلب بنجاح</h3>
                <p></p>
            </div>

        </div>
    </div>
</div>


<div class="modal fade body-modal" id="Resject-Reason-Modal" data-bs-backdrop="static" data-bs-keyboard="false"
     tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-md modal-dialog-centered">
        <div class="modal-content text-center">
            <div class="modal-body">
                <span class="ps-1"><img src="~/cms_lib/img/icons/rejectreason.svg" alt="details-icon" class="icons" /></span>
                <h3>سبب الرفض</h3>
                <div class="w-100 p-2" style="overflow:auto" id="ReasonRes"></div>
            </div>
            <div class="modal-button text-center">
                <button class="btn btn-tertiary" data-bs-dismiss="modal">عودة</button>
            </div>


        </div>
    </div>
</div>

@section Scripts{
    <script src="~/lib/jquery-ajax-unobtrusive/jquery.unobtrusive-ajax.min.js"></script>

    <script src="~/js/offlinedonation/index.js?version=@(DateTime.Now.Ticks)"></script>
}
